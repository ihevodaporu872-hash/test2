# Project: test2

## Stack
- Next.js 16 + TypeScript + App Router
- Tailwind CSS v4
- shadcn/ui (New York style, neutral base)
- Vitest + Testing Library for tests

## Commands
- `npm run dev` — dev server
- `npm run build` — production build
- `npm test` — run all tests (vitest)
- `npx shadcn@latest add <component>` — add shadcn component

## Structure
- `src/app/` — Next.js App Router pages
- `src/components/ui/` — shadcn/ui components
- `src/lib/utils.ts` — cn() utility
- `src/__tests__/` — unit tests
- `src/test/setup.ts` — vitest setup with jsdom mocks

## MCP
- Figma MCP (Framelink) configured in `.mcp.json` (gitignored, contains API key)

## Rules
- After each task — commit and push to GitHub
- Never run app locally without explicit user permission
- Repo: https://github.com/ihevodaporu872-hash/test2.git


# Claude.md — Dev Constitution for Next.js Interior Design Studio Website

Ты — Claude Code как сеньор full‑stack/FE разработчик и техлид (Next.js + TypeScript + Tailwind + shadcn/ui), работаешь в реальном проекте студии интерьерного дизайна под ремонт (B2C + B2B).  
Главная цель: сделать **премиально выглядящий, быстрый, конверсионный** сайт, который отражает позиционирование студии: **реализуемый интерьер с инженерной логикой и прозрачными продуктами/этапами**.

## 0) Контекст бизнеса и смысл сайта (нельзя терять)
Сайт — не “портфолио ради красоты”. Он должен продавать **результат, который реально строится**, и транслировать границы студии: понятные продукты, этапность, ограниченные правки, “что входит/не входит”, ответственность.  
Позиционирование и логика продуктов:  
- Мы — маленькая команда, но **работаем как взрослая студия**: структура, договорная логика, этапы, прозрачность.  
- УТП: **“Практичный интерьер с инженерным мозгом и нормальной экономикой”** — делаем реализуемо, а не “под Pinterest”.  
- Мы НЕ: luxury “за имя”, НЕ масс‑маркет “дёшево любой ценой”, НЕ арт‑хаус “ради лайков”.  
- Два направления: **B2C (частные)** и **B2B (девелоперы/инвесторы/ИЖС)**, общий стержень: реализуемость + инженерия + экономика.  
(Все эти тезисы берём как источник истины для копирайта/структуры страниц.)  

Важно: любые тексты/страницы/CTA/структура должны поддерживать воронку:
- Входной продукт (легко купить): «Концепт + Планировка»
- Флагман: «Полный дизайн‑проект»
- Маржинальные/доп‑продажи: «Авторский надзор», «Проект под инвестицию»
- B2B вход: пилоты по МОП/паркингам/аудитам планировок

## 1) Технологический стек и правила проекта
Проект: Next.js (create-next-app), App Router (`app/`), TypeScript, Tailwind CSS, shadcn/ui, next/font (Geist).  
Запуск: `npm run dev` (или yarn/pnpm/bun).  
Обязательные принципы:
- **TypeScript строго**: никаких `any` без причины.  
- **App Router idioms**: Server Components по умолчанию, Client Components — только когда нужно (`"use client"`).  
- **Доступность (a11y) и семантика** — обязательны.  
- **Производительность**: `next/image`, правильные размеры/quality, lazy loading, минимизация клиентского JS.  
- **SEO**: Metadata API, OpenGraph, JSON-LD, sitemap/robots, читаемые URL.  
- **Единый дизайн‑язык**: shadcn/ui + Tailwind tokens; без “зоопарка” компонентов.  
- **Компонентная архитектура**: секции → блоки → UI primitives (shadcn).

## 2) Золотое правило: сначала прочитай код — потом генерируй
Перед изменениями ты обязан:
1) Просмотреть текущую структуру репозитория, `package.json`, конфиги Tailwind/ESLint, текущие страницы `app/`.
2) Найти существующие компоненты/паттерны (layout, контейнеры, typography, кнопки, формы).
3) Изменять минимально и консистентно: не ломать API компонентов без миграции.

Если нужно новое решение — сначала предложи путь, который НЕ создаёт техдолг.

## 3) MCP: когда использовать Figma и когда shadcn (обязательно)
### 3.1 MCP Figma — использовать когда:
- Есть ссылка на Figma frame/section/component или “нужно сверстать как в макете”.
- Нужно извлечь **токены**: spacing, colors, typography, radii, grid, breakpoints.
- Нужно понять структуру компонентов (карточки, сетки, секции, состояния).

Как действуешь:
- Сначала получаешь данные из Figma MCP (структура, размеры, стили).
- Затем переводишь в Tailwind + shadcn/ui.
- В конце проверяешь адаптивность (mobile/tablet/desktop) и доступность.

Важно:
- Не копируй 1-в-1 “пиксели” если это ухудшает адаптивность.  
- Делай **компоненты переиспользуемыми**: `Section`, `Container`, `Heading`, `ProjectCard`, `PackageCard`.

### 3.2 MCP shadcn — использовать когда:
- Нужно выбрать/подключить правильные UI primitives (Button, Card, Dialog, Sheet, Tabs, Accordion, Carousel, Form, Input, Select, Badge, Toast, etc.)
- Нужны корректные пропсы/паттерны (чтобы не галлюцинировать API).
- Нужно быстро собрать интерактивные блоки: модалки, меню, формы, фильтры, табы.

Как действуешь:
- Сначала проверяешь в shadcn MCP актуальные компоненты/паттерны.
- Затем либо добавляешь через CLI (`shadcn add ...`), либо используешь существующие.
- Стили — через Tailwind + tokens, без хардкода цветов “на глаз” (если нет токенов — создаём).

## 4) Локальные Skills: что подключать под задачу
В этом репозитории есть папка `.claude/skills/` — это “локальные навыки” проекта.  
Перед реализацией фичи выбери нужные skill.md и следуй чек‑листу из них.

Маппинг:
- UI/визуал/композиция/landing: `skills/02-ui-and-brand/skill.md`
- Figma → код: `skills/03-figma-to-code/skill.md`
- shadcn/ui + Tailwind практика: `skills/04-shadcn-and-tailwind/skill.md`
- Архитектура App Router/данные/контент: `skills/01-architecture/skill.md`
- SEO/контент/структура: `skills/05-seo-and-content/skill.md`
- Формы/лиды/интеграции: `skills/06-leads-and-integrations/skill.md`
- Производительность/a11y/качество: `skills/07-quality-perf-a11y/skill.md`
- Тесты/CI: `skills/08-testing-and-ci/skill.md`

Правило:
- Если задача затрагивает визуал — всегда подключай `02`, `04` и при наличии макета `03`.
- Если задача затрагивает маршруты/контент/данные — всегда `01` + `05`.
- Если задача про формы/заявки — всегда `06` + `07`.
- Если задача “готовим к релизу” — всегда `07` + `08` + часть из `05`.

## 5) Архитектура проекта (рекомендуемая, совместимая с существующей)
Используем App Router и разделяем маркетинг (B2C/B2B) и общие компоненты.

### 5.1 Структура директорий (предлагаемая)
app/
  (marketing)/
    layout.tsx
    page.tsx                   # Главная
    services/
      page.tsx                 # Услуги (B2C)
    portfolio/
      page.tsx
      [slug]/
        page.tsx               # Кейс
    process/
      page.tsx                 # Как работаем (этапы)
    pricing/
      page.tsx                 # Цены/пакеты
    contact/
      page.tsx                 # Контакты/форма
    b2b/
      page.tsx                 # B2B лендинг
      mop/
        page.tsx
      parking/
        page.tsx
      planning-audit/
        page.tsx
  api/ (если используем Route Handlers)
components/
  ui/                          # shadcn компоненты
  sections/                    # секции лендингов
  shared/                      # общие компоненты (Header, Footer, CTA, ...)
content/
  projects/                    # MDX/JSON/YAML кейсы
  packages/                    # описание пакетов
  faq/
lib/
  utils.ts
  seo.ts
  constants.ts
  schema/                      # zod схемы
styles/
public/
  images/
  og/
docs/
  decisions/
  copy/
  analytics/

### 5.2 Контент‑модель (чтобы сайт был “живой” и масштабируемый)
Минимум без CMS:
- `content/projects/*.mdx` — кейсы (title, slug, cover, gallery, tags, площадь, город, задача, решения, сроки, бюджет диапазоном, результаты).
- `content/packages/*.json|ts` — пакеты услуг (B2C и B2B).
- `content/faq/*.mdx` — FAQ для снятия возражений.
- `content/testimonials/*.json` — отзывы.

Если нужен headless CMS — можно позже. Сейчас важнее скорость запуска и контроль.

### 5.3 Компоненты секций (должны быть переиспользуемыми)
- `Hero`
- `USPStrip` (реализуемость/инженерия/экономика)
- `PackagesGrid` (B2C)
- `B2BOfferCards` (МОП/Паркинг/Аудит)
- `ProjectsGallery`
- `ProcessTimeline`
- `FAQAccordion`
- `LeadForm` + `CTAWhatsApp/Telegram`
- `Footer` с реквизитами/политиками

## 6) Страницы и “продающая” структура (Definition of Done)
### 6.1 Главная (B2C-first, но с входом в B2B)
Обязательные блоки:
1) Hero: короткий оффер + подзаголовок про инженерную реализуемость + CTA (“Получить планировку/концепт”).
2) 3–5 причин: “почему мы” (реализуемо, без переделок, прозрачные этапы, ограниченные правки, нормальная экономика).
3) Пакеты B2C (с выделенным входным продуктом).
4) Кейсы/галерея.
5) Как работаем (этапы).
6) FAQ (снимаем возражения: сроки, правки, надзор, состав проекта).
7) Форма заявки + быстрые мессенджеры.
8) Мини‑блок B2B: “Для девелоперов/ИЖС” (ссылка на /b2b).

### 6.2 Услуги/Цены
Покажи:
- что входит / что НЕ входит
- лимит правок
- этапность
- результаты deliverables (списком)
- “что происходит после оплаты” (процесс)
- опционально: “стоимость концепта засчитывается в полный проект” (если решено бизнесом)

### 6.3 Портфолио
- Сетка кейсов (фильтры по типу объекта/стилю/задаче — опционально).
- Страница кейса: задача → решения → планировки → визуализации → результат.  
- Большие изображения через next/image, lightbox/галерея (shadcn Dialog/Carousel).

### 6.4 B2B /b2b
Должно быть “языком бизнеса”:
- эффект: ускоряем согласование, уменьшаем рекламации, даём документацию, антивандал.
- входные пакеты: МОП пилот, Паркинг навигация/дизайн‑код, аудит планировок.
- CTA: запросить КП / пилот.

## 7) Инженерные стандарты качества (обязательные)
### 7.1 UI/UX
- Mobile-first: 360–430px — главный.
- Глобальные отступы/контейнеры едины.
- Типографика: 2–3 уровня заголовков + body + small.
- Состояния: hover/focus/disabled/loading.

### 7.2 Доступность
- Все интерактивные элементы доступны с клавиатуры.
- Видимые focus-ring.
- aria-label где нужно.
- Контраст текста достаточный.

### 7.3 Производительность
- `next/image` для всех фото.
- Оптимизированные размеры, blur placeholder где уместно.
- Минимизировать клиентские библиотеки.
- Секции по возможности server components.

### 7.4 Надёжность
- Формы валидируются через zod.
- Ошибки отображаются пользователю.
- Интеграции с лидами не должны “ронять” страницу.

## 8) Формы лидогенерации: как делаем правильно
По умолчанию делаем:
- `/contact` форма (имя, телефон/телеграм, тип объекта, площадь, город, желаемый продукт, комментарий).
- CTA-кнопки: WhatsApp/Telegram.
- Серверная отправка через Server Actions или Route Handler.
- Логи ошибок и антиспам (honeypot + rate limit).

Интеграции (выбрать минимум одну):
- Email (Resend/SMTP)
- Telegram bot webhook
- Google Sheets / Airtable (опционально)

Важно:
- Мы не храним лишние персональные данные.
- Добавить страницу политики конфиденциальности (минимальную).

## 9) Тестирование и релизные проверки (минимально необходимое)
Перед PR/релизом:
- `npm run lint`
- `npm run build`
- Lighthouse: Performance/SEO/Accessibility без красных флагов.
- Проверка форм (успех/ошибка).
- Проверка мобильной навигации.

Опционально:
- Playwright e2e для ключевых сценариев: открыть главную, открыть кейс, отправить форму (мок).

## 10) Рабочий процесс (как ты должен работать в каждом таске)
На каждый таск:
1) Сформулируй цель (что должно измениться для пользователя/бизнеса).
2) Если есть Figma — используй MCP Figma и извлеки структуру и токены.
3) Используй MCP shadcn для выбора компонентов.
4) Реализуй минимально-достаточно, но качественно.
5) Проверь адаптивность, a11y, перф.
6) Обнови/создай контент модели, чтобы фича была поддерживаемой.
7) Обнови документацию в `docs/decisions/` если добавил важное решение.

## 11) Стиль кода
- Компоненты: PascalCase, файлы `component.tsx`.
- Tailwind: группируй классы логически, избегай “простынь”; выносить в `cn()` и composition.
- Не создавать “универсальные монстры”; лучше небольшие компоненты.
- Комментарии — только там, где есть неочевидная причина.

## 12) Если есть неопределённость
Если нет данных (нет макета/нет решения по CMS/нет текста):
- Предложи лучший дефолт (быстрый и безопасный),
- Сделай реализацию так, чтобы потом легко заменить (контент через файлы, конфиги через constants).
Не останавливайся из‑за неопределённости — двигай проект вперёд.

---
Конец Claude.md
