# Рабочие соглашения команды

> Дата создания: 2026-02-07
> Назначение: единые правила разработки, контента и процессов для проекта

---

## 1. Как добавлять новые страницы

### Структура файлов

```
src/app/
├── (marketing)/           # Маркетинговые страницы (общий layout)
│   ├── page.tsx           # Главная
│   ├── services/
│   │   └── page.tsx       # Услуги
│   ├── portfolio/
│   │   ├── page.tsx       # Список кейсов
│   │   └── [slug]/
│   │       └── page.tsx   # Отдельный кейс
│   ├── about/
│   │   └── page.tsx       # О студии
│   ├── contacts/
│   │   └── page.tsx       # Контакты
│   └── blog/
│       ├── page.tsx       # Список статей
│       └── [slug]/
│           └── page.tsx   # Статья
├── layout.tsx             # Корневой layout
└── globals.css            # Глобальные стили
```

### Чек-лист при создании новой страницы

- [ ] Файл создан в правильной директории (см. структуру выше)
- [ ] Экспортируется `metadata` (или `generateMetadata` для динамических страниц)
- [ ] `title` содержит ключевое слово + название студии
- [ ] `description` — 150-160 символов, с CTA или пользой
- [ ] Страница использует существующие компоненты из `src/components/`
- [ ] Добавлена ссылка в навигацию (если нужно)
- [ ] Страница адаптивна (проверить на 320px, 768px, 1440px)
- [ ] Добавлены структурированные данные (JSON-LD), если применимо
- [ ] Open Graph изображение указано
- [ ] Страница проходит `npm run build` без ошибок

### Шаблон metadata

```tsx
import { Metadata } from 'next'

export const metadata: Metadata = {
  title: 'Название страницы — Студия дизайна интерьера',
  description: 'Описание страницы до 160 символов с ключевым словом и призывом.',
  openGraph: {
    title: 'Название страницы — Студия дизайна интерьера',
    description: 'Описание для соцсетей.',
    images: ['/og/page-name.jpg'],
  },
}
```

---

## 2. Как писать контент

### Тон коммуникации (Tone of Voice)

Полный гайд: [docs/copy/tone-of-voice.md](../copy/tone-of-voice.md)

**Краткая выжимка:**
- Стиль: профессиональный, но человечный. Без канцелярита и «воды»
- Обращение: на «вы» (с маленькой буквы)
- Без восклицательных знаков в заголовках (допускается 1-2 на всю страницу)
- Без субъективных оценок без доказательств («лучший», «уникальный» — только с фактами)
- Числа и факты предпочтительнее прилагательных

### Структура контента на странице

1. **Заголовок (H1)** — один на страницу, содержит ключевое слово
2. **Подзаголовок** — раскрывает пользу или результат
3. **Основной контент** — структурирован подзаголовками H2-H3
4. **CTA** — в конце каждого смыслового блока и в конце страницы
5. **Социальное доказательство** — отзывы, цифры, примеры (где уместно)

### Правила написания текстов

- Абзац — 2-4 предложения максимум
- Предложение — до 20 слов (оптимально 12-15)
- Списки предпочтительнее стен текста
- Каждый блок текста отвечает на один вопрос читателя
- CTA всегда конкретный: «Рассчитать стоимость», а не «Узнать больше»

---

## 3. Как избежать технического долга

### Переиспользование компонентов

- Перед созданием нового компонента — проверить `src/components/` на наличие аналога
- UI-примитивы (Button, Card, Input, Badge и т.д.) — только из shadcn/ui, кастомные не создавать
- Составные компоненты (секции страниц) — в `src/components/sections/`
- Компоненты с бизнес-логикой — в `src/components/features/`

### Запреты

- **Inline-стили запрещены.** Все стили — через Tailwind CSS классы
- **`any` запрещён.** TypeScript strict mode обязателен. Если тип сложный — создать интерфейс в отдельном файле или в том же файле
- **`// @ts-ignore` и `// @ts-expect-error` — только с комментарием-объяснением** (почему нельзя типизировать)
- **`console.log` не должен попадать в production.** Использовать `console.log` только для отладки, удалять перед коммитом
- **Копипаст запрещён.** Если код дублируется — выносить в утилиту или компонент
- **Магические числа/строки** — выносить в константы (`src/lib/constants.ts`)

### Структура импортов (порядок)

```tsx
// 1. React / Next.js
import { useState } from 'react'
import Image from 'next/image'

// 2. Внешние библиотеки
import { motion } from 'framer-motion'

// 3. Внутренние модули (абсолютные пути)
import { Button } from '@/components/ui/button'
import { cn } from '@/lib/utils'

// 4. Типы
import type { Project } from '@/types'

// 5. Стили (если есть)
import './styles.css'
```

---

## 4. Чек-лист код-ревью

### Обязательные проверки

- [ ] **Сборка проходит:** `npm run build` завершается без ошибок
- [ ] **TypeScript:** нет ошибок типизации, нет `any` без причины
- [ ] **Компоненты:** переиспользуются существующие, нет дублирования
- [ ] **Стили:** только Tailwind, нет inline-стилей, нет кастомного CSS без причины
- [ ] **Адаптивность:** проверено на мобильном (320px+), планшете (768px+), десктопе (1440px+)
- [ ] **Доступность:** alt-тексты у изображений, семантический HTML, фокус на интерактивных элементах
- [ ] **Производительность:** изображения через `next/image`, нет тяжёлых импортов без lazy-loading
- [ ] **Метаданные:** title, description, OG-теги на новых страницах
- [ ] **Нет console.log** в финальном коде
- [ ] **Нет закомментированного кода** (удалять, а не комментировать)

### Желательные проверки

- [ ] Компонент покрыт тестом (если содержит логику)
- [ ] Нет N+1 запросов к API/БД
- [ ] Размер бандла не вырос значительно (проверять `next build` output)

---

## 5. Definition of Done (DoD)

Фича считается завершённой, когда:

1. **Код написан** и соответствует правилам из этого документа
2. **Сборка проходит:** `npm run build` — 0 ошибок
3. **Линтер пройден:** `npm run lint` — 0 ошибок (warnings допускаются, но желательно исправить)
4. **Адаптивность проверена** на 3 разрешениях (мобильное, планшет, десктоп)
5. **Контент на русском языке** и соответствует тону коммуникации
6. **Метаданные заполнены** (title, description, OG)
7. **Код-ревью пройдено** (или self-review по чек-листу выше)
8. **Коммит сделан** с понятным сообщением на английском
9. **Изменения запушены** в репозиторий

---

## 6. Соглашения по именованию

### Файлы и директории

| Тип | Формат | Пример |
|---|---|---|
| Страницы (Next.js) | `kebab-case/page.tsx` | `services/page.tsx` |
| Компоненты | `PascalCase.tsx` | `HeroSection.tsx` |
| Утилиты | `camelCase.ts` | `formatPrice.ts` |
| Константы | `camelCase.ts` или `SCREAMING_SNAKE` внутри | `constants.ts` → `MAX_UPLOAD_SIZE` |
| Типы/интерфейсы | `PascalCase` | `ProjectData`, `ServicePackage` |
| CSS-модули (если нужны) | `ComponentName.module.css` | `HeroSection.module.css` |
| Документация | `kebab-case.md` | `cro-plan-30days.md` |

### Компоненты

```tsx
// Имя файла: HeroSection.tsx
// Имя компонента совпадает с именем файла
export function HeroSection() { ... }

// НЕ делать:
// export default function () { ... }  — анонимный экспорт
// export function Hero_Section() { ... } — snake_case
```

### CSS-классы (Tailwind)

- Использовать утилиту `cn()` для условных классов
- Группировать классы логически: layout → spacing → typography → colors → effects
- Длинные списки классов выносить в переменные

```tsx
// Хорошо
const cardClasses = cn(
  'flex flex-col gap-4',           // layout
  'p-6',                           // spacing
  'text-sm font-medium',           // typography
  'bg-white border rounded-lg',    // colors + borders
  'shadow-sm hover:shadow-md',     // effects
  isActive && 'border-primary'     // условие
)

// Плохо
<div className="flex flex-col gap-4 p-6 text-sm font-medium bg-white border rounded-lg shadow-sm hover:shadow-md border-primary">
```

### Git-коммиты

Формат: `type: краткое описание на английском`

Типы:
- `feat:` — новая функциональность
- `fix:` — исправление бага
- `docs:` — документация
- `style:` — форматирование (не CSS)
- `refactor:` — рефакторинг без изменения поведения
- `perf:` — оптимизация производительности
- `test:` — тесты
- `chore:` — обновление зависимостей, конфигов

Примеры:
```
feat: add portfolio page with case grid
fix: correct mobile nav overflow on small screens
docs: add CRO plan and working agreements
refactor: extract price formatter to utils
```

### Ветки (если используется branching)

Формат: `type/short-description`

Примеры:
```
feat/portfolio-page
fix/mobile-nav
docs/working-agreements
```
